<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"rtf-zhang.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.13.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="The description of your website">
<meta property="og:type" content="website">
<meta property="og:title" content="Blogz">
<meta property="og:url" content="https://rtf-zhang.github.io/index.html">
<meta property="og:site_name" content="Blogz">
<meta property="og:description" content="The description of your website">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Bob">
<meta property="article:tag" content="The keywords of your website. Supports multiple values.">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://rtf-zhang.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Blogz</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Blogz</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">The subtitle of your website</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Bob"
      src="/images/header.jpg">
  <p class="site-author-name" itemprop="name">Bob</p>
  <div class="site-description" itemprop="description">The description of your website</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">33</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Rtf-Zhang/" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Rtf-Zhang&#x2F;" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://rtf-zhang.github.io/2022/10/29/leetcode/LC159_LengthOfLongestSubstringTwoDistinct/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="Bob">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blogz">
      <meta itemprop="description" content="The description of your website">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Blogz">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/29/leetcode/LC159_LengthOfLongestSubstringTwoDistinct/" class="post-title-link" itemprop="url">LeetCode 159 至多包含两个不同字符的最长子串</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-10-29 20:00:00 / Modified: 15:38:02" itemprop="dateCreated datePublished" datetime="2022-10-29T20:00:00+08:00">2022-10-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LeetCodeAlgorithm/" itemprop="url" rel="index"><span itemprop="name">LeetCodeAlgorithm</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="LeetCode-159-至多包含两个不同字符的最长子串"><a href="#LeetCode-159-至多包含两个不同字符的最长子串" class="headerlink" title="LeetCode 159 至多包含两个不同字符的最长子串"></a>LeetCode 159 至多包含两个不同字符的最长子串</h4><hr>
<blockquote>
<h5 id="题目"><a href="#题目" class="headerlink" title="题目:"></a>题目:</h5></blockquote>
<pre>
给你一个字符串 s ，请你找出 至多 包含 两个不同字符 的最长子串，并返回该子串的长度。
 

示例 1：

输入：s = "eceba"
输出：3
解释：满足题目要求的子串是 "ece" ，长度为 3 。
示例 2：

输入：s = "ccaabbb"
输出：5
解释：满足题目要求的子串是 "aabbb" ，长度为 5 。
 

提示：

1 <= s.length <= 105
s 由英文字母组成

来源：力扣（LeetCode）
链接：https://leetcode.cn/problems/longest-substring-with-at-most-two-distinct-characters
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。
</pre>

<br/>

<blockquote>
<h5 id="题解"><a href="#题解" class="headerlink" title="题解:"></a>题解:</h5></blockquote>
<pre>
此题使用双指针加滑动窗口来求解，主要需要注意边界条件
解题思路:
1.因为题目要求字串包含至多两个不同字符，我们使用长度为2的数据保存当前计数的字符 twoChar
2.使用快慢指针，快指针遍历，慢指针总是指向和快指针上一个计数字符的起点
  比如 aabbccd 如果快指针此刻正在计数c，那么慢指针指向第一个b位置，
  这样我们可以保证从快指针到慢指针的范围内，一定只有b和c两种字符
3.每次当快指针指向和当前计数的两种字符都不同的字符时候，我们需要计算之前计数的长度，然后替换
  新的计数字符，且开始计数的值需加上快慢指针之间的字符数
</pre>

<br/>

<blockquote>
<h5 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h5></blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lengthOfLongestSubstringTwoDistinct</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (s.length() == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">char</span>[] towC = <span class="keyword">new</span> <span class="title class_">char</span>[]&#123;<span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;-&#x27;</span>&#125;;</span><br><span class="line">    <span class="type">char</span>[] chars = s.toCharArray();</span><br><span class="line">    <span class="type">int</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    towC[<span class="number">0</span>] = chars[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxLen</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (++p2 &lt; chars.length) &#123;</span><br><span class="line">        <span class="keyword">if</span> (chars[p2] == towC[<span class="number">0</span>] || chars[p2] == towC[<span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (chars[p2] != chars[p2 - <span class="number">1</span>]) &#123;</span><br><span class="line">                p1 = p2;</span><br><span class="line">            &#125;</span><br><span class="line">            len++;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (towC[<span class="number">1</span>] == <span class="string">&#x27;-&#x27;</span>) &#123;</span><br><span class="line">            towC[<span class="number">1</span>] = chars[p2];</span><br><span class="line">            p1 = p2;</span><br><span class="line">            len++;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            maxLen = Math.max(maxLen, len);</span><br><span class="line">            len = p2 - p1 + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (towC[<span class="number">0</span>] == chars[p1]) &#123;</span><br><span class="line">                towC[<span class="number">1</span>] = chars[p2];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                towC[<span class="number">0</span>] = chars[p2];</span><br><span class="line">            &#125;</span><br><span class="line">            p1 = p2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    maxLen = Math.max(maxLen, len);</span><br><span class="line">    <span class="keyword">return</span> maxLen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<style>
pre { 
    background-color: rgb(243,243,243) !important; 
    padding:10px;
    font-size:16px;
    color:rgb(68,68,68);
    line-height:30px;
    font-family:'Arial';
    letter-spacing:1px
}
</style>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://rtf-zhang.github.io/2022/10/28/leetcode/LC24_SwapPairs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="Bob">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blogz">
      <meta itemprop="description" content="The description of your website">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Blogz">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/28/leetcode/LC24_SwapPairs/" class="post-title-link" itemprop="url">LeetCode 24 两两交换链表中的节点</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-10-28 21:00:00 / Modified: 11:56:37" itemprop="dateCreated datePublished" datetime="2022-10-28T21:00:00+08:00">2022-10-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LeetCodeAlgorithm/" itemprop="url" rel="index"><span itemprop="name">LeetCodeAlgorithm</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="LeetCode-24-两两交换链表中的节点"><a href="#LeetCode-24-两两交换链表中的节点" class="headerlink" title="LeetCode 24 两两交换链表中的节点"></a>LeetCode 24 两两交换链表中的节点</h4><hr>
<blockquote>
<h5 id="题目"><a href="#题目" class="headerlink" title="题目:"></a>题目:</h5></blockquote>
<pre>
给你一个链表，两两交换其中相邻的节点，并返回交换后链表的头节点。你必须在不修改节点内部的值的情况下完成本题（即，只能进行节点交换）。

示例 1：


输入：head = [1,2,3,4]
输出：[2,1,4,3]
示例 2：

输入：head = []
输出：[]
示例 3：

输入：head = [1]
输出：[1]
</pre>

<br/>

<blockquote>
<h5 id="题解"><a href="#题解" class="headerlink" title="题解:"></a>题解:</h5></blockquote>
<pre>
此题思路很简单，定义一个哨兵节点，然后交换链表节点重新拼接即可
</pre>

<br/>

<blockquote>
<h5 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h5></blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> ListNode <span class="title function_">swapPairs</span><span class="params">(ListNode head)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">null</span> || head.next == <span class="literal">null</span>) <span class="keyword">return</span> head;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">root</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> root;</span><br><span class="line">    p.next = head;</span><br><span class="line">    <span class="keyword">while</span> (p.next != <span class="literal">null</span> &amp;&amp; p.next.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">node</span> <span class="operator">=</span> p.next;</span><br><span class="line">        p.next = node.next;</span><br><span class="line">        node.next = p.next.next;</span><br><span class="line">        p.next.next = node;</span><br><span class="line">        p = p.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://rtf-zhang.github.io/2022/10/28/leetcode/LC23_MergeKLists/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="Bob">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blogz">
      <meta itemprop="description" content="The description of your website">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Blogz">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/28/leetcode/LC23_MergeKLists/" class="post-title-link" itemprop="url">LeetCode 23 合并K个升序链表</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-10-28 20:00:00 / Modified: 10:05:53" itemprop="dateCreated datePublished" datetime="2022-10-28T20:00:00+08:00">2022-10-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LeetCodeAlgorithm/" itemprop="url" rel="index"><span itemprop="name">LeetCodeAlgorithm</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="LeetCode-23-合并K个升序链表"><a href="#LeetCode-23-合并K个升序链表" class="headerlink" title="LeetCode 23 合并K个升序链表"></a>LeetCode 23 合并K个升序链表</h4><hr>
<blockquote>
<h5 id="题目"><a href="#题目" class="headerlink" title="题目:"></a>题目:</h5></blockquote>
<pre>
给你一个链表数组，每个链表都已经按升序排列。
请你将所有链表合并到一个升序链表中，返回合并后的链表。

示例 1：

输入：lists = [[1,4,5],[1,3,4],[2,6]]
输出：[1,1,2,3,4,4,5,6]
解释：链表数组如下：
[
1->4->5,
1->3->4,
2->6
]
将它们合并到一个有序链表中得到。
1->1->2->3->4->4->5->6
示例 2：

输入：lists = []
输出：[]
示例 3：

输入：lists = [[]]
输出：[]


提示：

k == lists.length
0 <= k <= 10^4
0 <= lists[i].length <= 500
-10^4 <= lists[i][j] <= 10^4
lists[i] 按 升序 排列
lists[i].length 的总和不超过 10^4
</pre>

<br/>

<blockquote>
<h5 id="题解"><a href="#题解" class="headerlink" title="题解:"></a>题解:</h5></blockquote>
<pre>
此题我们使用小顶堆数据结构巧解此事:

解题步骤如下:
1.创建K个指针依次指向K个链表的表头
2.定义小顶堆，比较对象是K指针指向的节点的值
3.将K个指针放入小顶堆
4.定义哨兵节点Head
5.取小顶堆顶部节点H，此节点为当前堆中最小值，将此节点链接到哨兵节点之后，
  然后将此指针后移(如果有),然后重新放入小顶堆中重拍
6.重复步骤5直至堆中节点全部推出
</pre>

<br/>

<blockquote>
<h5 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h5></blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> ListNode <span class="title function_">process</span><span class="params">(ListNode[] lists)</span>&#123;</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="type">ListNode</span> <span class="variable">p</span> <span class="operator">=</span> head;</span><br><span class="line">    <span class="keyword">if</span> (lists.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    PriorityQueue&lt;ListNode&gt; priorityQueue = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;(lists.length, Comparator.comparingInt(o -&gt; o.val));</span><br><span class="line">    <span class="keyword">for</span> (ListNode node : lists) &#123;</span><br><span class="line">        <span class="keyword">if</span> (node != <span class="literal">null</span>) &#123;</span><br><span class="line">            priorityQueue.offer(node);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (!priorityQueue.isEmpty()) &#123;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">node</span> <span class="operator">=</span> priorityQueue.poll();</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">next</span> <span class="operator">=</span> priorityQueue.peek();</span><br><span class="line">        <span class="keyword">if</span> (next == <span class="literal">null</span>) &#123;</span><br><span class="line">            p.next = node;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ListNode</span> <span class="variable">pNode</span> <span class="operator">=</span> node;</span><br><span class="line">        <span class="keyword">while</span> (pNode.next != <span class="literal">null</span> &amp;&amp; pNode.next.val &lt;= next.val) &#123;</span><br><span class="line">            pNode = pNode.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (pNode.next != <span class="literal">null</span>) &#123;</span><br><span class="line">            priorityQueue.add(pNode.next);</span><br><span class="line">        &#125;</span><br><span class="line">        pNode.next = <span class="literal">null</span>;</span><br><span class="line">        p.next = node;</span><br><span class="line">        p = pNode;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<style>
pre { 
    background-color: rgb(243,243,243) !important; 
    padding:10px;
    font-size:16px;
    color:rgb(68,68,68);
    line-height:30px;
    font-family:'Arial';
    letter-spacing:1px
}
</style>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://rtf-zhang.github.io/2022/10/27/leetcode/LC22_GenerateParenthesis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="Bob">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blogz">
      <meta itemprop="description" content="The description of your website">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Blogz">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/27/leetcode/LC22_GenerateParenthesis/" class="post-title-link" itemprop="url">LeetCode 22 括号生成</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-10-27 23:00:00 / Modified: 18:38:40" itemprop="dateCreated datePublished" datetime="2022-10-27T23:00:00+08:00">2022-10-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LeetCodeAlgorithm/" itemprop="url" rel="index"><span itemprop="name">LeetCodeAlgorithm</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="LeetCode-22-括号生成"><a href="#LeetCode-22-括号生成" class="headerlink" title="LeetCode 22 括号生成"></a>LeetCode 22 括号生成</h4><hr>
<blockquote>
<h5 id="题目"><a href="#题目" class="headerlink" title="题目:"></a>题目:</h5></blockquote>
<pre>
数字 n 代表生成括号的对数，请你设计一个函数，用于能够生成所有可能的并且 有效的 括号组合。

示例 1：

输入：n = 3
输出：["((()))","(()())","(())()","()(())","()()()"]
示例 2：

输入：n = 1
输出：["()"]

提示：
1 <= n <= 8
</pre>

<br/>

<blockquote>
<h5 id="题解"><a href="#题解" class="headerlink" title="题解:"></a>题解:</h5></blockquote>
<pre>
经典DFS算法 
根据 <a href="https://rtf-zhang.github.io/2022/10/11/leetcode/LC20_IsValid/">LC20_IsValid</a> 我们定义的有效括号的特性可得到以下规律:

1.我们必须保证每次放入后，右括号数必须小于或者等于左括号，即每个右括号一定要能匹配一个左括号
2.如果一个括号组放入的左括号组的数量等于我们定义的括号对数量，则只能放入右括号
3.其他情况即可以放入左括号，也可以放入右括号
</pre>

<br/>

<blockquote>
<h5 id="图解"><a href="#图解" class="headerlink" title="图解:"></a>图解:</h5></blockquote>
<pre>
图解
</pre>

<br/>

<blockquote>
<h5 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h5></blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;String&gt; <span class="title function_">generateParenthesis</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    dfs(list, <span class="number">0</span>, n, <span class="keyword">new</span> <span class="title class_">StringBuilder</span>());</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(List&lt;String&gt; list, <span class="type">int</span> put, <span class="type">int</span> remain, StringBuilder s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (put == <span class="number">0</span> &amp;&amp; remain == <span class="number">0</span>) &#123;</span><br><span class="line">        list.add(s.toString());</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (put == <span class="number">0</span> &amp;&amp; remain &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        dfs(list, put + <span class="number">1</span>, remain - <span class="number">1</span>, s .append(<span class="string">&#x27;(&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (put &gt; <span class="number">0</span> &amp;&amp; remain == <span class="number">0</span>) &#123;</span><br><span class="line">        dfs(list, put - <span class="number">1</span>, remain, s.append(<span class="string">&#x27;)&#x27;</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        dfs(list, put + <span class="number">1</span>, remain - <span class="number">1</span>, <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(s.toString()).append(<span class="string">&#x27;(&#x27;</span>));</span><br><span class="line">        dfs(list, put - <span class="number">1</span>, remain, <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(s).append(<span class="string">&#x27;)&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<style>
pre { 
    background-color: rgb(243,243,243) !important; 
    padding:10px;
    font-size:16px;
    color:rgb(68,68,68);
    line-height:30px;
    font-family:'Arial';
    letter-spacing:1px
}
</style>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://rtf-zhang.github.io/2022/10/27/leetcode/LC20_IsValid/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="Bob">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blogz">
      <meta itemprop="description" content="The description of your website">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Blogz">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/27/leetcode/LC20_IsValid/" class="post-title-link" itemprop="url">LeetCode 20 有效的括号</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-10-27 22:00:00" itemprop="dateCreated datePublished" datetime="2022-10-27T22:00:00+08:00">2022-10-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-10-29 10:29:17" itemprop="dateModified" datetime="2022-10-29T10:29:17+08:00">2022-10-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LeetCodeAlgorithm/" itemprop="url" rel="index"><span itemprop="name">LeetCodeAlgorithm</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="LeetCode-20-有效的括号"><a href="#LeetCode-20-有效的括号" class="headerlink" title="LeetCode 20 有效的括号"></a>LeetCode 20 有效的括号</h4><hr>
<blockquote>
<h5 id="题目"><a href="#题目" class="headerlink" title="题目:"></a>题目:</h5></blockquote>
<pre>
给定一个只包括 '('，')'，'{'，'}'，'['，']' 的字符串 s ，判断字符串是否有效
有效字符串需满足：

左括号必须用相同类型的右括号闭合。
左括号必须以正确的顺序闭合。

示例 1：

输入：s = "()"
输出：true
示例 2：

输入：s = "()[]{}"
输出：true
示例 3：

输入：s = "(]"
输出：false
示例 4：

输入：s = "([)]"
输出：false
示例 5：

输入：s = "{[]}"
输出：true


提示：

1 <= s.length <= 104
s 仅由括号 '()[]{}' 组成
</pre>

<br/>

<blockquote>
<h5 id="题解"><a href="#题解" class="headerlink" title="题解:"></a>题解:</h5></blockquote>
<pre>
此题我们使用数据结构中的栈结构来巧解此题
我们知道，一个有效的括号组合有以下特性

1.括号组的数量一定是偶数
2.括号组的数量如果是0则一定有效
3.每种类型的左括号和右括号数量相同
4.每一对括号内要么没有其他括号组，如果有，其他括号组一定也是有效括号组

我们按照以下规则处理:

剪枝
1.如果括号组数量是奇数直接返回False
2.如果括号组的数量如果是0直接返回True

遍历
1.如果括号是左括号，直接入栈
2.如果括号是右括号:
  a.如果栈顶括号是与之匹配的左括号,栈顶括号出栈
  b.其他所有情况直接返回False
3.如果括号组全部匹配完毕返回True
</pre>

<br/>

<blockquote>
<h5 id="图解"><a href="#图解" class="headerlink" title="图解:"></a>图解:</h5></blockquote>
<img src="/images/img_lc_20.gif">


<br/>

<blockquote>
<h5 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h5></blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> s.length();</span><br><span class="line">    <span class="keyword">if</span> (len == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (len % <span class="number">2</span> != <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="type">char</span>[] chars = s.toCharArray();</span><br><span class="line">    Stack&lt;Character&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    <span class="type">String</span> <span class="variable">signal</span> <span class="operator">=</span> <span class="string">&quot;&#123;[(&#125;])&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> signal.indexOf(chars[i]);</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">3</span>) &#123;</span><br><span class="line">            stack.add(chars[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (stack.isEmpty()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">            <span class="keyword">if</span> (c != signal.charAt(index - <span class="number">3</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<style>
pre { 
    background-color: rgb(243,243,243) !important; 
    padding:10px;
    font-size:16px;
    color:rgb(68,68,68);
    line-height:30px;
    font-family:'Arial';
    letter-spacing:1px
}
</style>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://rtf-zhang.github.io/2022/10/27/leetcode/LC18_FourSum/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="Bob">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blogz">
      <meta itemprop="description" content="The description of your website">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Blogz">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/27/leetcode/LC18_FourSum/" class="post-title-link" itemprop="url">LeetCode 18 四数之和</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-10-27 21:00:00 / Modified: 17:50:38" itemprop="dateCreated datePublished" datetime="2022-10-27T21:00:00+08:00">2022-10-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/LeetCodeAlgorithm/" itemprop="url" rel="index"><span itemprop="name">LeetCodeAlgorithm</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="LeetCode-18-四数之和"><a href="#LeetCode-18-四数之和" class="headerlink" title="LeetCode 18 四数之和"></a>LeetCode 18 四数之和</h4><hr>
<blockquote>
<h5 id="题目"><a href="#题目" class="headerlink" title="题目:"></a>题目:</h5></blockquote>
<pre>
给你一个由 n 个整数组成的数组 nums ，和一个目标值 target 。
请你找出并返回满足下述全部条件且不重复的四元组 [nums[a], nums[b], nums[c], nums[d]] 
（若两个四元组元素一一对应，则认为两个四元组重复）：

0 <= a, b, c, d < n
a、b、c 和 d 互不相同
nums[a] + nums[b] + nums[c] + nums[d] == target
你可以按 任意顺序 返回答案 。


示例 1：

输入：nums = [1,0,-1,0,-2,2], target = 0
输出：[[-2,-1,1,2],[-2,0,0,2],[-1,0,0,1]]
示例 2：

输入：nums = [2,2,2,2,2], target = 8
输出：[[2,2,2,2]]


提示：

1 <= nums.length <= 200
-109 <= nums[i] <= 109
-109 <= target <= 109
</pre>

<br/>

<blockquote>
<h5 id="题解"><a href="#题解" class="headerlink" title="题解:"></a>题解:</h5></blockquote>
<pre>
四数之和和三数之和原理一致，也是利用双指针法求解
详解请参照  <a href="https://rtf-zhang.github.io/2022/10/11/leetcode/LC15_ThreeSum/">[三数之和详解]</a>
此题不给出详细的分析过程
</pre>

<br/>

<blockquote>
<h5 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h5></blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">fourSum</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> target)</span> &#123;</span><br><span class="line">    List&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">    <span class="keyword">if</span> (len &lt; <span class="number">4</span>) <span class="keyword">return</span> result;</span><br><span class="line">    Arrays.sort(nums);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len - <span class="number">3</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i - <span class="number">1</span>] == nums[i]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span> ((<span class="type">long</span>) nums[i] + nums[i + <span class="number">1</span>] + nums[i + <span class="number">2</span>] + nums[i + <span class="number">3</span>] &gt; target) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">if</span> ((<span class="type">long</span>) nums[i] + nums[len - <span class="number">1</span>] + nums[len - <span class="number">2</span>] + nums[len - <span class="number">3</span>] &lt; target) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i + <span class="number">1</span>; j &lt; len - <span class="number">2</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (j &gt; i + <span class="number">1</span> &amp;&amp; nums[j - <span class="number">1</span>] == nums[j]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> ((<span class="type">long</span>) nums[j] + nums[j + <span class="number">1</span>] + nums[j + <span class="number">2</span>] &gt; target - nums[i]) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span> ((<span class="type">long</span>) nums[j] + nums[len - <span class="number">1</span>] + nums[len - <span class="number">2</span>] &lt; target - nums[i]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="type">long</span> <span class="variable">remain</span> <span class="operator">=</span> (<span class="type">long</span>) target - nums[i] - nums[j];</span><br><span class="line">            <span class="type">int</span> <span class="variable">p1</span> <span class="operator">=</span> j + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">p2</span> <span class="operator">=</span> len - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (p1 &lt; p2) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[p1] + nums[p2] == remain) &#123;</span><br><span class="line">                    result.add(Arrays.asList(nums[i], nums[j], nums[p1], nums[p2]));</span><br><span class="line">                    <span class="keyword">while</span> (++p1 &lt;= p2 &amp;&amp; nums[p1] == nums[p1 - <span class="number">1</span>]) &#123;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">while</span> (--p2 &gt;= p1 &amp;&amp; nums[p2] == nums[p2 + <span class="number">1</span>]) &#123;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span> (nums[p1] + nums[p2] &lt; remain) &#123;</span><br><span class="line">                    <span class="keyword">while</span> (++p1 &lt;= p2 &amp;&amp; nums[p1] == nums[p1 - <span class="number">1</span>]) &#123;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">while</span> (--p2 &gt;= p1 &amp;&amp; nums[p2] == nums[p2 + <span class="number">1</span>]) &#123;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<style>
pre { 
    background-color: rgb(243,243,243) !important; 
    padding:10px;
    font-size:16px;
    color:rgb(68,68,68);
    line-height:30px;
    font-family:'Arial';
    letter-spacing:1px
}
</style>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://rtf-zhang.github.io/2022/10/21/android/Android04_FragmentTransaction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="Bob">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blogz">
      <meta itemprop="description" content="The description of your website">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Blogz">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/21/android/Android04_FragmentTransaction/" class="post-title-link" itemprop="url">Android开发--FragmentTransaction</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-10-21 20:00:00 / Modified: 17:53:05" itemprop="dateCreated datePublished" datetime="2022-10-21T20:00:00+08:00">2022-10-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<h4 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h4></blockquote>
<pre>
在运行时，FragmentManager 可以添加、删除、替换和使用片段执行其他操作以响应用户交互。
您提交的每组片段更改称为一个事务，您可以使用 FragmentTransaction 该类提供的 API 指定在事务中执行的操作
您可以将多个操作分组到一个事务中——例如，一个事务可以添加或替换多个片段
</pre>

</br>

<blockquote>
<h4 id="创建和操作事务"><a href="#创建和操作事务" class="headerlink" title="创建和操作事务"></a>创建和操作事务</h4></blockquote>
<pre>
通过调用 FragmentManagerbeginTransaction() 获取FragmentTransaction的实例，如下例所示：
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FragmentManager</span> <span class="variable">fragmentManager</span> <span class="operator">=</span> ...</span><br><span class="line"><span class="type">FragmentTransaction</span> <span class="variable">fragmentTransaction</span> <span class="operator">=</span> fragmentManager.beginTransaction();</span><br></pre></td></tr></table></figure>

<pre>
每个人的最终调用都FragmentTransaction必须提交事务。该commit()调用FragmentManager表示所有操作都已添加到事务中
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FragmentManager</span> <span class="variable">fragmentManager</span> <span class="operator">=</span> ...</span><br><span class="line"><span class="type">FragmentTransaction</span> <span class="variable">fragmentTransaction</span> <span class="operator">=</span> fragmentManager.beginTransaction();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add operations here</span></span><br><span class="line"></span><br><span class="line">fragmentTransaction.commit();</span><br></pre></td></tr></table></figure>

</br>

<blockquote>
<h4 id="片段状态更改重新排序"><a href="#片段状态更改重新排序" class="headerlink" title="片段状态更改重新排序"></a>片段状态更改重新排序</h4></blockquote>
<pre>
每个都 FragmentTransaction 应该使用 setReorderingAllowed(true) 允许片段状态更改重排序
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FragmentManager</span> <span class="variable">fragmentManager</span> <span class="operator">=</span> ...</span><br><span class="line">fragmentManager.beginTransaction()</span><br><span class="line">    ...</span><br><span class="line">    .setReorderingAllowed(<span class="literal">true</span>)</span><br><span class="line">    .commit();</span><br></pre></td></tr></table></figure>

<pre>
为了行为兼容性，默认情况下不启用重新排序标志。
但是，它需要允许FragmentManager正确执行您的FragmentTransaction，
特别是当它在后台堆栈上运行并运行动画和过渡时。
启用该标志可确保如果多个事务一起执行，任何中间片段（即添加然后立即替换的片段）
不会经历生命周期更改或执行其动画或转换。

请注意，此标志会影响事务的初始执行和使用 撤销事务popBackStack()
</pre>

</br>

<blockquote>
<h4 id="添加和删​​除片段"><a href="#添加和删​​除片段" class="headerlink" title="添加和删​​除片段"></a>添加和删​​除片段</h4></blockquote>
<pre>
调用 add()将片段添加到 FragmentManager。此方法接收片段容器的 ID ，以及您希望添加的片段的类名。
添加的片段被移动到 RESUMED 状态。
强烈建议容器是 FragmentContainerView 视图层次结构的一部分。

要从主机中删除片段，请调用 remove() 方法传入一个片段实例
该实例是由 findFragmentById() or findFragmentByTag()方法找到的
如果片段的视图先前已添加到容器中，则此时视图将从容器中删除。移除的片段被移动到 DESTROYED 状态。

用于 replace() 将容器中的现有片段替换为您提供的新片段类的实例。
调用replace()相当于调用 remove() 先移除容器中的片段，然后将新片段添加到同一个容器中。

以下代码片段显示了如何将一个片段替换为另一个片段：
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create new fragment and transaction</span></span><br><span class="line"><span class="type">FragmentManager</span> <span class="variable">fragmentManager</span> <span class="operator">=</span> ...</span><br><span class="line"><span class="type">FragmentTransaction</span> <span class="variable">transaction</span> <span class="operator">=</span> fragmentManager.beginTransaction();</span><br><span class="line">transaction.setReorderingAllowed(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Replace whatever is in the fragment_container view with this fragment</span></span><br><span class="line">transaction.replace(R.id.fragment_container, ExampleFragment.class, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Commit the transaction</span></span><br><span class="line">transaction.commit();</span><br></pre></td></tr></table></figure>

<pre>
在这个例子中，一个新的实例 ExampleFragment 替换了当前位于由 
标识的布局容器中的片段（如果有的话） R.id.fragment_container
</pre>

<pre>
<font color=#dd0000>注意：强烈建议始终使用采用 Class 而不是片段实例的片段操作，
以确保创建片段的相同机制也用于从保存状态恢复片段。
有关更多详细信息，请参阅 FragmentManager</font>
</pre>

<pre>
默认情况下，在 FragmentTransaction 中所做的更改不会添加到后台堆栈。
要保存这些更改，您可以调用 addToBackStack()
</pre>

</br>

<blockquote>
<h4 id="提交异步"><a href="#提交异步" class="headerlink" title="提交异步"></a>提交异步</h4></blockquote>
<pre>
调用 commit() 不会立即执行事务。事务被安排在主 UI 线程上运行，只要它能够这样做。
但是，如有必要，您可以调用 commitNow() 以立即在您的 UI 线程上运行片段事务。

请注意，commitNow 与 addToBackStack 是不兼容的. 或者，您可以通过调用 executePendingTransactions() 
执行所有尚未运行的由FragmentTransactions提交的事务。
这种方法与 addToBackStack 是兼容的

对于绝大多数用例，使用 commit() 就足够了
</pre>

</br>

<blockquote>
<h4 id="执行顺序"><a href="#执行顺序" class="headerlink" title="执行顺序"></a>执行顺序</h4></blockquote>
<pre>
在 FragmentTransaction 中执行操作的顺序很重要，
尤其是在使用setCustomAnimations(). 
此方法将给定的动画应用于其后的所有片段操作
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getSupportFragmentManager().beginTransaction()</span><br><span class="line">    .setCustomAnimations(enter1, exit1, popEnter1, popExit1)</span><br><span class="line">    .add(R.id.container, ExampleFragment.class, <span class="literal">null</span>) <span class="comment">// gets the first animations</span></span><br><span class="line">    .setCustomAnimations(enter2, exit2, popEnter2, popExit2)</span><br><span class="line">    .add(R.id.container, ExampleFragment.class, <span class="literal">null</span>) <span class="comment">// gets the second animations</span></span><br><span class="line">    .commit()</span><br></pre></td></tr></table></figure>

</br>

<blockquote>
<h4 id="显示和隐藏"><a href="#显示和隐藏" class="headerlink" title="显示和隐藏"></a>显示和隐藏</h4></blockquote>
<pre>
使用 FragmentTransaction 中的 show() hide() 方法显示和隐藏已添加到容器的片段的视图
这些方法设置片段视图的可见性，而不影响片段的生命周期

虽然您不需要使用片段事务来切换片段中视图的可见性，
但这些方法对于您希望更改可见性状态与后台堆栈上的事务相关联的情况很有用
</pre>

</br>

<blockquote>
<h4 id="附加和分离"><a href="#附加和分离" class="headerlink" title="附加和分离"></a>附加和分离</h4></blockquote>
<pre>
FragmentTransaction 方法 detach() 将片段与 UI 分离，破坏其视图层次结构。
片段保持与放入回退栈时相同的状态(STOPPED)。这意味着片段已从 UI 中删除，但仍由片段管理器管理。

attach() 方法重新附加之前分离的片段。这会导致其视图层次结构被重新创建、附加到 UI 并显示。

由于 FragmentTransaction 被视为单个原子操作集，
因此对同一事务中的同一片段实例的同时调用 detach 和 attach 会相互抵消，从而避免了片段 UI 的破坏和立即重建。
如果想要实现立即 detach 然后 attach 操作需使用单独的事务分别 commit()
然后使用 executePendingOperations() 方法立即执行挂起的事务
</pre>

<pre>

</pre>

<style>
pre { 
    background-color: rgb(243,243,243) !important; 
    padding:20px;
    font-size:16px;
    color:rgb(68,68,68);
    line-height:30px;
    font-family:'Arial';
    letter-spacing:1px
}
</style>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://rtf-zhang.github.io/2022/10/20/android/Android03_FragmentManager/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="Bob">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blogz">
      <meta itemprop="description" content="The description of your website">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Blogz">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/20/android/Android03_FragmentManager/" class="post-title-link" itemprop="url">Android开发--FragmentManager</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-10-20 21:00:00" itemprop="dateCreated datePublished" datetime="2022-10-20T21:00:00+08:00">2022-10-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-10-21 11:45:01" itemprop="dateModified" datetime="2022-10-21T11:45:01+08:00">2022-10-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<h4 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h4></blockquote>
<pre>
FragmentManager 类负责在应用的 fragment 上执行一些操作，
如添加、移除或替换操作，以及将操作添加到返回堆栈
</pre>

<br/>

<blockquote>
<h4 id="访问-FragmentManager"><a href="#访问-FragmentManager" class="headerlink" title="访问 FragmentManager"></a>访问 FragmentManager</h4></blockquote>
<pre>
我们可以在Activity和Fragment中访问FragmentManager，下面依次介绍两种访问方式和联系
</pre>

<blockquote>
<h5 id="1-在-Activity-中访问"><a href="#1-在-Activity-中访问" class="headerlink" title="1.在 Activity 中访问"></a>1.在 Activity 中访问</h5></blockquote>
<pre>
每个 FragmentActivity 及其子类（如 AppCompatActivity）
都可以通过 getSupportFragmentManager() 方法访问 FragmentManager
</pre>

<blockquote>
<h5 id="2-在-Fragment-中访问"><a href="#2-在-Fragment-中访问" class="headerlink" title="2.在 Fragment 中访问"></a>2.在 Fragment 中访问</h5></blockquote>
<pre>
Fragment 也能够托管一个或多个子 fragment。在 fragment 内，
您可以通过 getChildFragmentManager() 获取对管理 fragment 子级的 FragmentManager 的引用。
如果您需要访问其宿主 FragmentManager，可以使用 getParentFragmentManager()
</pre>

<br/>

<blockquote>
<h4 id="托管-Fragment"><a href="#托管-Fragment" class="headerlink" title="托管 Fragment"></a>托管 Fragment</h4></blockquote>
<pre>
fragment、其宿主以及与每个 fragment 关联的 FragmentManager 实例之间的关系如下图所示
</pre>

<img src="/images/android_fragment_manager.png" width="60%" />

<pre>
两个界面布局示例，显示了 fragment 与其宿主 activity 之间的关系。每个示例中都有一个 activity 宿主。
这两个示例中的宿主 activity 都以 BottomNavigationView 的形式向用户显示顶级导航，
该视图负责以应用中的不同屏幕换出宿主 fragment，其中每个屏幕都实现为单独的 fragment

示例 1 中的宿主 fragment 托管两个子 fragment，这些子 fragment 构成拆分视图屏幕。
示例 2 中的宿主 fragment 托管一个子 fragment，该子 fragment 构成滑动视图的显示 fragment。

基于此设置，您可以将每个宿主视为具有与其关联的 FragmentManager，用于管理其子 fragment。
下图说明了这一点，并显示了 supportFragmentManager、parentFragmentManager 和 childFragmentManager 之间的属性映射
</pre>

<img src="/images/android_fragment_mapping.png" width="60%" />

<pre>
每个宿主都有与其关联的 FragmentManager，用于管理其子 fragment。
需要引用的相应 FragmentManager 属性取决于调用点在 fragment 层次结构中的位置，
以及您尝试访问的 fragment 管理器。对 FragmentManager 进行引用后，您就可以使用它来操纵向用户显示的 fragment。
</pre>

<blockquote>
<h4 id="子-fragment-的管理"><a href="#子-fragment-的管理" class="headerlink" title="子 fragment 的管理"></a>子 fragment 的管理</h4></blockquote>
<pre>
一般来说，应用应由应用项目中的一个或少数几个 activity 组成，其中每个 activity 表示一组相关的屏幕。
activity 可能会提供一个点来放置顶级导航，并提供一个位置来限定 ViewModels 以及 fragment 之间的其他视图状态的范围。
应用中的每个目的地应由一个 fragment 来表示。

如果您想要一次显示多个 fragment（如在拆分视图中或信息中心内），应使用子 fragment，
它们由目的地 fragment 及其子 fragment 管理器进行管理。子 fragment 的其他用例可能包括：

1.屏幕滑动，其中父 fragment 中的 ViewPager2 管理一系列子 fragment 视图。
2.一组相关屏幕中的子导航。
3.Jetpack Navigation 将子 fragment 用作各个目的地。一个 activity 托管一个父 NavHostFragment，
    并在用户浏览应用时以不同的子目的地 fragment 填充它的空间。
</pre>

<blockquote>
<h4 id="执行事务"><a href="#执行事务" class="headerlink" title="执行事务"></a>执行事务</h4></blockquote>
<pre>
如需在布局容器中显示 fragment，请使用 FragmentManager 创建 FragmentTransaction。
在事务中，您随后可以对容器执行 add() 或 replace() 操作。

例如，一个简单的 FragmentTransaction 可能如下所示：
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FragmentManager</span> <span class="variable">fragmentManager</span> <span class="operator">=</span> getSupportFragmentManager();</span><br><span class="line">fragmentManager.beginTransaction()</span><br><span class="line">    .replace(R.id.fragment_container, ExampleFragment.class, <span class="literal">null</span>)</span><br><span class="line">    .setReorderingAllowed(<span class="literal">true</span>)</span><br><span class="line">    .addToBackStack(<span class="string">&quot;name&quot;</span>) <span class="comment">// name can be null</span></span><br><span class="line">    .commit();</span><br></pre></td></tr></table></figure>

<pre>
在本例中，ExampleFragment 会替换当前在布局容器中的 fragment（如有），
该布局容器由 R.id.fragment_container ID 进行标识。
将 fragment 的类提供给 replace() 方法可让 FragmentManager 使用其 FragmentFactory 处理实例化

setReorderingAllowed(true) 可优化事务中涉及的 fragment 的状态变化，
以使动画和过渡正常运行。如需详细了解如何使用动画和过渡进行导航

addToBackStack() 会将事务提交到返回堆栈。用户稍后可以通过按“返回”按钮反转事务，并恢复上一个 fragment。
如果您在一个事务中添加或移除了多个 fragment，弹出返回堆栈时，所有这些操作都会撤消。
在 addToBackStack() 调用中提供的可选名称使您能够使用 popBackStack() 弹回到该特定事务

如果您在执行移除 fragment 的事务时未调用 addToBackStack()，则提交事务时会销毁已移除的 fragment，
用户无法返回到该 fragment。如果您在移除某个 fragment 时调用了 addToBackStack()，
则该 fragment 只会 STOPPED，稍后当用户返回时它会 RESUMED。请注意，在这种情况下，其视图会被销毁
</pre>

<br/>

<blockquote>
<h4 id="查找现有-fragment"><a href="#查找现有-fragment" class="headerlink" title="查找现有 fragment"></a>查找现有 fragment</h4></blockquote>
<pre>
可以通过 findFragmentById() 或者 findFragmentByTag() 获取对布局容器中当前 fragment 的引用
</pre>

<blockquote>
<h5 id="findFragmentById"><a href="#findFragmentById" class="headerlink" title="findFragmentById()"></a>findFragmentById()</h5></blockquote>
<pre>
可使用 findFragmentById() 按给定的 ID 查找 fragment；
在 FragmentTransaction 中添加时，可使用它按容器 ID 进行查找
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FragmentManager</span> <span class="variable">fragmentManager</span> <span class="operator">=</span> getSupportFragmentManager();</span><br><span class="line">fragmentManager.beginTransaction()</span><br><span class="line">    .replace(R.id.fragment_container, ExampleFragment.class, <span class="literal">null</span>)</span><br><span class="line">    .setReorderingAllowed(<span class="literal">true</span>)</span><br><span class="line">    .addToBackStack(<span class="literal">null</span>)</span><br><span class="line">    .commit();</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="type">ExampleFragment</span> <span class="variable">fragment</span> <span class="operator">=</span></span><br><span class="line">        (ExampleFragment) fragmentManager.findFragmentById(R.id.fragment_container);</span><br></pre></td></tr></table></figure>

<blockquote>
<h5 id="findFragmentByTag"><a href="#findFragmentByTag" class="headerlink" title="findFragmentByTag()"></a>findFragmentByTag()</h5></blockquote>
<pre>
可以为 fragment 分配一个唯一的标记，并使用 findFragmentByTag() 获取引用。
您可以在布局中定义的 fragment 上使用 android:tag XML 属性来分配标记，
也可以在 FragmentTransaction 中的 add() 或 replace() 操作期间分配标记
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FragmentManager</span> <span class="variable">fragmentManager</span> <span class="operator">=</span> getSupportFragmentManager();</span><br><span class="line">fragmentManager.beginTransaction()</span><br><span class="line">    .replace(R.id.fragment_container, ExampleFragment.class, <span class="literal">null</span>, <span class="string">&quot;tag&quot;</span>)</span><br><span class="line">    .setReorderingAllowed(<span class="literal">true</span>)</span><br><span class="line">    .addToBackStack(<span class="literal">null</span>)</span><br><span class="line">    .commit();</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="type">ExampleFragment</span> <span class="variable">fragment</span> <span class="operator">=</span> (ExampleFragment) fragmentManager.findFragmentByTag(<span class="string">&quot;tag&quot;</span>);</span><br></pre></td></tr></table></figure>

<br/>

<blockquote>
<h4 id="有关子-fragment-和同级-fragment-的特殊注意事项"><a href="#有关子-fragment-和同级-fragment-的特殊注意事项" class="headerlink" title="有关子 fragment 和同级 fragment 的特殊注意事项"></a>有关子 fragment 和同级 fragment 的特殊注意事项</h4></blockquote>
<pre>
1.在任何给定的时间点，只允许一个 FragmentManager 控制 fragment 返回堆栈。

2.如果应用在屏幕上同时显示多个同级 fragment，或者应用使用子 fragment，
  则必须指定一个 FragmentManager 来处理应用的主要导航。  

3.如需在 fragment 事务内定义主要导航 fragment，请对事务调用 setPrimaryNavigationFragment() 方法，
  并传入一个 fragment 的实例，该 fragment 的 childFragmentManager 应具有主要控制权。

4.将导航结构视为一系列层，其中 activity 作为最外层，封装下面的每一层子 fragment。
  每一层都必须有一个主要导航 fragment。当发生返回事件时，最内层控制导航行为。
  一旦最内层再也没有可从其弹回的 fragment 事务，控制权就会向外回一层，此过程会一直重复，直至到达 activity 为止。

5.当同时显示两个或更多 fragment 时，其中只有一个可以是主要导航 fragment。

6.如果将某个 fragment 设为主要导航 fragment，会移除对先前 fragment 的指定。在上例中，
  如果您将详情 fragment 设为主要导航 fragment，就会移除对主 fragment 的指定。
</pre>

<blockquote>
<h4 id="支持多个返回堆栈"><a href="#支持多个返回堆栈" class="headerlink" title="支持多个返回堆栈"></a>支持多个返回堆栈</h4></blockquote>
<pre>
在某些情况下，您的应用可能需要支持多个返回堆栈。一个常见示例是，您的应用使用底部导航栏。
FragmentManager 可让您通过 saveBackStack() 和 restoreBackStack() 方法支持多个返回堆栈。
这两种方法使您可以通过保存一个返回堆栈并恢复另一个返回堆栈来在返回堆栈之间进行交换。

saveBackStack() 的工作方式类似于使用可选 name 参数调用 popBackStack()：
弹出指定事务以及堆栈上在此之后的所有事务。不同之处在于 saveBackStack() 
会保存弹出事务中所有 fragment 的状态。

例如，假设您之前使用 addToBackStack() 提交 FragmentTransaction，从而将 fragment 添加到返回堆栈
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">supportFragmentManager.beginTransaction()</span><br><span class="line">  .replace(R.id.fragment_container, ExampleFragment.class, <span class="literal">null</span>)</span><br><span class="line">  <span class="comment">// setReorderingAllowed(true) and the optional string argument for</span></span><br><span class="line">  <span class="comment">// addToBackStack() are both required if you want to use saveBackStack().</span></span><br><span class="line">  .setReorderingAllowed(<span class="literal">true</span>)</span><br><span class="line">  .addToBackStack(<span class="string">&quot;replacement&quot;</span>)</span><br><span class="line">  .commit();</span><br></pre></td></tr></table></figure>

<pre>
在这种情况下，您可以通过调用 saveState() 来保存此 fragment 事务和 ExampleFragment 的状态：
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">supportFragmentManager.saveBackStack(<span class="string">&quot;replacement&quot;</span>);</span><br></pre></td></tr></table></figure>

<pre>
<font color=#dd0000>注意：您只能将 saveBackStack() 用于调用 setReorderingAllowed(true) 的事务，
         以确保可以将事务还原为单一原子操作</font>
</pre>

<pre>
您可以使用相同的名称参数调用 restoreBackStack()，以恢复所有弹出的事务以及所有保存的 fragment 状态
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">supportFragmentManager.restoreBackStack(<span class="string">&quot;replacement&quot;</span>);</span><br></pre></td></tr></table></figure>

<pre>
<font color=#dd0000>注意：除非使用 addToBackStack() 传递 fragment 事务的可选名称，
否则不能使用 saveBackStack() 和 restoreBackStack()</font>
</pre>

<blockquote>
<h4 id="为-fragment-提供依赖项"><a href="#为-fragment-提供依赖项" class="headerlink" title="为 fragment 提供依赖项"></a>为 fragment 提供依赖项</h4></blockquote>
<pre>
添加 fragment 时，您可以手动实例化 fragment 并将其添加到 FragmentTransaction
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ExampleFragment</span> <span class="variable">myFragment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ExampleFragment</span>();</span><br><span class="line">fragmentManager.beginTransaction()</span><br><span class="line">    .add(R.id.fragment_view_container, myFragment)</span><br><span class="line">    .setReorderingAllowed(<span class="literal">true</span>)</span><br><span class="line">    .commit();</span><br></pre></td></tr></table></figure>

<pre>
当您提交 fragment 事务时，您创建的 fragment 实例就是使用的实例。不过，在配置更改期间，
activity 及其所有 fragment 都会被销毁，然后使用最适用的 Android 资源重新创建。
FragmentManager 会为您处理所有这些操作。
它会重新创建 fragment 的实例，将其附加到宿主，并重新创建返回堆栈状态。

默认情况下，FragmentManager 会使用框架提供的 FragmentFactory 来实例化 fragment 的新实例。
<font color=#dd0000>此默认工厂使用反射来查找和调用 fragment 的无参数构造函数</font>。
这意味着，您无法使用此默认工厂为 fragment 提供依赖项。
这也意味着，默认情况下，在重新创建过程中，不会使用您首次创建 fragment 时所用的任何自定义构造函数。

如需为 fragment 提供依赖项或使用任何自定义构造函数，
您必须创建自定义 FragmentFactory 子类，然后替换 FragmentFactory.instantiate。
您随后可以将 FragmentManager 的默认工厂替换为您的自定义工厂，该自定义工厂随后将用于实例化 fragment

假设您有一个 DessertsFragment，负责显示您家乡受欢迎的甜点。
我们假设 DessertsFragment 依赖于 DessertsRepository 类，该类可为其提供向用户显示正确界面所需的信息。

您可以将 DessertsFragment 定义为在其构造函数中需要 DessertsRepository 实例
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DessertsFragment</span> <span class="keyword">extends</span> <span class="title class_">Fragment</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> DessertsRepository dessertsRepository;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DessertsFragment</span><span class="params">(DessertsRepository dessertsRepository)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.dessertsRepository = dessertsRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Getter omitted.</span></span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre>
FragmentFactory 的简单实现可能与以下代码类似
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyFragmentFactory</span> <span class="keyword">extends</span> <span class="title class_">FragmentFactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> DessertsRepository repository;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyFragmentFactory</span><span class="params">(DessertsRepository repository)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.repository = repository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Fragment <span class="title function_">instantiate</span><span class="params">(<span class="meta">@NonNull</span> ClassLoader classLoader, <span class="meta">@NonNull</span> String className)</span> &#123;</span><br><span class="line">        Class&lt;? <span class="keyword">extends</span> <span class="title class_">Fragment</span>&gt; fragmentClass = loadFragmentClass(classLoader, className);</span><br><span class="line">        <span class="keyword">if</span> (fragmentClass == DessertsFragment.class) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DessertsFragment</span>(repository);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">super</span>.instantiate(classLoader, className);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre>
此示例创建了 FragmentFactory 的子类，替换了 instantiate() 方法，
以便为 DessertsFragment 提供自定义 fragment 创建逻辑。
其他 fragment 类通过 super.instantiate() 由 FragmentFactory 的默认行为进行处理。

您随后可以通过在 FragmentManager 上设置一个属性，
将 MyFragmentFactory 指定为要在构造应用的 fragment 时使用的工厂。
您必须在 activity 的 super.onCreate() 之前设置此属性，
以确保在重新创建 fragment 时使用 MyFragmentFactory
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MealActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(<span class="meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="type">DessertsRepository</span> <span class="variable">repository</span> <span class="operator">=</span> DessertsRepository.getInstance();</span><br><span class="line">        getSupportFragmentManager().setFragmentFactory(<span class="keyword">new</span> <span class="title class_">MyFragmentFactory</span>(repository));</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre>
<font color=#dd0000>请注意，在 activity 中设置 FragmentFactory 会替换整个 activity 的 fragment 层次结构中
 fragment 的创建。换句话说，您添加的任何子 fragment 的 childFragmentManager 
 都会使用此处设置的自定义 fragment 工厂，除非在较低的级别被替换</font>
</pre>


<style>
pre { 
    background-color: rgb(243,243,243) !important; 
    padding:20px;
    font-size:16px;
    color:rgb(68,68,68);
    line-height:30px;
    font-family:'Arial';
    letter-spacing:1px
}
</style>



      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://rtf-zhang.github.io/2022/10/17/android/Android02_Fragment/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="Bob">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blogz">
      <meta itemprop="description" content="The description of your website">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Blogz">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/17/android/Android02_Fragment/" class="post-title-link" itemprop="url">Android开发--Fragment</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-10-17 21:00:00" itemprop="dateCreated datePublished" datetime="2022-10-17T21:00:00+08:00">2022-10-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-10-20 22:00:47" itemprop="dateModified" datetime="2022-10-20T22:00:47+08:00">2022-10-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<h4 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h4></blockquote>
<pre>
1.Fragment 英文原意是“片断”或“碎片”,在 Android 系统中代表用户界面的局部区域,它可以是一个活动的部分,
    可以单独设置局部用户界面,也可以单独接收用户输入和处理事件消息,与用户交互

2.Android 在 Android 3.0（API 级别 11）中引入了片段，主要目的是为大屏幕（如平板电脑）上
    更加动态和灵活的界面设计提供支持

3.Fragment 的出现是为了适应平板电脑等大屏幕设备,改变了早期因手机屏幕较小而将整个屏幕作为一个整体界面
    处理的状况,Fragment 组件可以将屏幕分成多个相对独立的区域,用户界面的更新可以在>局部区域发生,使得用户
    界面切换方式更加高效、丰富

4.每个片段都会通过各自的生命周期回调来定义自己的布局和行为，您可以将一个片段加入多个 Activity，因此，
    您应采用可复用式设计，避免直接通过某个片段操纵另一个片段
</pre>

<br/>

<blockquote>
<h4 id="创建片段"><a href="#创建片段" class="headerlink" title="创建片段"></a>创建片段</h4></blockquote>
<pre>
如要创建片段，您必须创建 Fragment 的子类（或已有其子类）。Fragment 类的代码与 Activity 非常相似。
它包含与 Activity 类似的回调方法，如 onCreate()、onStart()、onPause() 和 onStop()。实际上，
如果您要将现有 Android 应用转换为使用片段，可能只需将代码从 Activity 的回调方法移入片段相应的回调方法中。

片段通常用作 Activity 界面的一部分，并且会将其自己的布局融入 Activity。
如要为片段提供布局，您必须实现 onCreateView() 回调方法，Android 系统会在片段需要绘制其布局时调用该方法。
此方法的实现所返回的 View 必须是片段布局的根视图。

如要从 onCreateView() 返回布局，您可以通过 XML 中定义的布局资源来扩展布局。为帮助您执行此操作，
onCreateView() 提供了一个 LayoutInflater 对象。

例：
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ExampleFragment</span> <span class="keyword">extends</span> <span class="title class_">Fragment</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container,</span></span><br><span class="line"><span class="params">                             Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="comment">// Inflate the layout for this fragment</span></span><br><span class="line">        <span class="keyword">return</span> inflater.inflate(R.layout.example_fragment, container, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre>
传递至 onCreateView() 的 container 参数是您的片段布局将插入到的父级 ViewGroup（来自 Activity 的布局）。
savedInstanceState 参数是在恢复片段时，提供上一片段实例相关数据的 Bundle

inflate() 方法带有三个参数：
1.您想要扩展的布局的资源 ID。
2.将作为扩展布局父项的 ViewGroup。传递 container 对系统向扩展布局的根视图（由其所属的父视图指定）
    应用布局参数具有重要意义。
3.指示是否应在扩展期间将扩展布局附加至 ViewGroup（第二个参数）的布尔值。（在本例中，此值为 false，
    因为系统已将扩展布局插入 container，而传递 true 值会在最终布局中创建一个多余的视图组。）
</pre>

<br/>

<blockquote>
<h4 id="添加片段"><a href="#添加片段" class="headerlink" title="添加片段"></a>添加片段</h4></blockquote>
<pre>
通常，片段会向宿主 Activity 贡献一部分界面，作为 Activity 整体视图层次结构的一部分嵌入到 Activity 中。
可以通过两种方式向 Activity 布局添加片段：
</pre>

<blockquote>
<h5 id="1-在-Activity-的布局文件内声明片段"><a href="#1-在-Activity-的布局文件内声明片段" class="headerlink" title="1.在 Activity 的布局文件内声明片段"></a>1.在 Activity 的布局文件内声明片段</h5></blockquote>
<pre>
例如，以下是拥有两个片段的 Activity 的布局文件
</pre>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.news.ArticleListFragment&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/list&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fragment</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.news.ArticleReaderFragment&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/viewer&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<pre>
<fragment> 中的 android:name 属性指定要在布局中进行实例化的 Fragment 类。创建此 Activity 布局时，
系统会将布局中指定的每个片段实例化，并为每个片段调用 onCreateView() 方法，以检索每个片段的布局。
系统会直接插入片段返回的 View，从而代替 <fragment> 元素。
</pre>

<blockquote>
<h5 id="2-通过编程方式将片段添加到某个现有-ViewGroup"><a href="#2-通过编程方式将片段添加到某个现有-ViewGroup" class="headerlink" title="2.通过编程方式将片段添加到某个现有 ViewGroup"></a>2.通过编程方式将片段添加到某个现有 ViewGroup</h5></blockquote>
<pre>
在 Activity 运行期间，您可以随时将片段添加到 Activity 布局中。您只需指定要将片段放入哪个 ViewGroup。
如要在您的 Activity 中执行片段事务（如添加、移除或替换片段），则必须使用 FragmentTransaction 中的 API。
如下所示，您可以从 FragmentActivity 获取一个 FragmentTransaction 实例
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FragmentManager</span> <span class="variable">fragmentManager</span> <span class="operator">=</span> getSupportFragmentManager();</span><br><span class="line"><span class="type">FragmentTransaction</span> <span class="variable">fragmentTransaction</span> <span class="operator">=</span> fragmentManager.beginTransaction();</span><br></pre></td></tr></table></figure>

<pre>
然后，您可以使用 add() 方法添加一个片段，指定要添加的片段以及将其插入哪个视图。例如：
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ExampleFragment</span> <span class="variable">fragment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ExampleFragment</span>();</span><br><span class="line">fragmentTransaction.add(R.id.fragment_container, fragment);</span><br><span class="line">fragmentTransaction.commit();</span><br></pre></td></tr></table></figure>

<pre>
传递到 add() 的第一个参数是 ViewGroup，即应放置片段的位置，由资源 ID 指定，第二个参数是要添加的片段。
一旦您通过 FragmentTransaction 做出了更改，就必须调用 commit() 以使更改生效。
</pre>    

<br/>

<blockquote>
<h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4></blockquote>
<pre>
Fragment生命周期图示如下,与Activity有所不同
</pre>

<table rules="none" align="center">
    <tr>
        <td>
            <center>
                <img src="/images/android_fragment_lifecycle.png" width="60%" />
                <br/>
                <font color="AAAAAA">Fragment.jpg</font>
            </center>
        </td>
        <td>
            <center>
                <img src="/images/android_activity_lifecycle.gif" width="60%" />
                <br/>
                <font color="AAAAAA">Activity.jpg</font>
            </center>
        </td>
    </tr>
</table>

<pre>
下面来分析生命周期
</pre>

<blockquote>
<h5 id="onAttach"><a href="#onAttach" class="headerlink" title="onAttach()"></a>onAttach()</h5></blockquote>
<pre>
onAttach()回调将在Fragment与其Activity关联之后调用。
需要使用Activity的引用或者使用Activity作为其他操作的上下文，将在此回调方法中实现
</pre>

<blockquote>
<h5 id="onCreate-Bundle-savedInstanceState"><a href="#onCreate-Bundle-savedInstanceState" class="headerlink" title="onCreate(Bundle savedInstanceState)"></a>onCreate(Bundle savedInstanceState)</h5></blockquote>
<pre>
此时的Fragment的onCreat回调时，该fragmet还没有获得Activity的onCreate()已完成的通知，
所以不能将依赖于Activity视图层次结构存在性的代码放入此回调方法中。在onCreate()回调方法中，
我们应该尽量避免耗时操作。此时的bundle就可以获取到activity传来的参数
</pre>

<blockquote>
<h5 id="onCreateView-LayoutInflater-inflater-ViewGroup-container-Bundle-savedInstanceState"><a href="#onCreateView-LayoutInflater-inflater-ViewGroup-container-Bundle-savedInstanceState" class="headerlink" title="onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState)"></a>onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState)</h5></blockquote>
<pre>
其中的Bundle为状态包与上面的bundle不一样。
注意的是：不要将视图层次结构附加到传入的ViewGroup父元素中，该关联会自动完成。
如果在此回调中将碎片的视图层次结构附加到父元素，很可能会出现异常。
这句话什么意思呢？就是不要把初始化的view视图主动添加到container里面，
因为这会系统自带，所以inflate函数的第三个参数必须填false，而且不能出现container.addView(v)的操作。
</pre>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">View</span> <span class="variable">v</span> <span class="operator">=</span> inflater.inflate(R.layout.hello_world, container, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<h5 id="onActivityCreated"><a href="#onActivityCreated" class="headerlink" title="onActivityCreated()"></a>onActivityCreated()</h5></blockquote>
<pre>
onActivityCreated()回调会在Activity完成其onCreate()回调之后调用。
在调用onActivityCreated()之前，Activity的视图层次结构已经准备好了，
这是在用户看到用户界面之前你可对用户界面执行的最后调整的地方。

Note：如果Activity和它的Fragment是从保存的状态重新创建的，此回调尤其重要，
也可以在这里确保此Activity的其他所有Fragment已经附加到该Activity中了
</pre>

<blockquote>
<h5 id="onStart-onResume-onPause-onStop"><a href="#onStart-onResume-onPause-onStop" class="headerlink" title="onStart()\onResume()\onPause()\onStop()"></a>onStart()\onResume()\onPause()\onStop()</h5></blockquote>
<pre>
这四种生命周期和Activity的回调方法进行绑定，也就是说与Activity中对应的生命周期相同，因此不做过多介绍
</pre>

<blockquote>
<h5 id="onDestroyView"><a href="#onDestroyView" class="headerlink" title="onDestroyView()"></a>onDestroyView()</h5></blockquote>
<pre>
该回调方法在视图层次结构与Fragment分离之后调用
</pre>

<blockquote>
<h5 id="onDestroy"><a href="#onDestroy" class="headerlink" title="onDestroy()"></a>onDestroy()</h5></blockquote>
<pre>
不再使用Fragment时调用。（备注：Fragment仍然附加到Activity并任然可以找到，但是不能执行其他操作）
</pre>

<blockquote>
<h5 id="onDetach"><a href="#onDetach" class="headerlink" title="onDetach()"></a>onDetach()</h5></blockquote>
<pre>
Fragme生命周期最后回调函数，调用后，Fragment不再与Activity绑定，释放资源。
</pre>

<blockquote>
<h5 id="setRetainInstance"><a href="#setRetainInstance" class="headerlink" title="setRetainInstance()"></a>setRetainInstance()</h5></blockquote>
<pre>
在使用Fragment时，我发现了一个金矿，那就是setRetainInstance()方法,此方法可以有效地提高系统的运行效率，
对流畅性要求较高的应用可以适当采用此方法进行设置。Fragment有一个非常强大的功能——就是可以在Activity重新创建时
可以不完全销毁Fragment，以便Fragment可以恢复。在onCreate()方法中调用setRetainInstance(true/false)方法是最佳位置。
当Fragment恢复时的生命周期如上图所示，注意图中的红色箭头。当在onCreate()方法中调用了setRetainInstance(true)后，
Fragment恢复时会跳过onCreate()和onDestroy()方法，因此不能在onCreate()中放置一些初始化逻辑，切忌！
</pre>

<style>
pre { 
    background-color: rgb(243,243,243) !important; 
    padding:20px;
    font-size:16px;
    color:rgb(68,68,68);
    line-height:30px;
    font-family:'Arial';
    letter-spacing:1px
}
</style>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://rtf-zhang.github.io/2022/10/17/android/Android01_Activity/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/header.jpg">
      <meta itemprop="name" content="Bob">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Blogz">
      <meta itemprop="description" content="The description of your website">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Blogz">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/10/17/android/Android01_Activity/" class="post-title-link" itemprop="url">Android开发--Activity</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-10-17 20:00:00" itemprop="dateCreated datePublished" datetime="2022-10-17T20:00:00+08:00">2022-10-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2022-10-18 09:16:59" itemprop="dateModified" datetime="2022-10-18T09:16:59+08:00">2022-10-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<h4 id="概要"><a href="#概要" class="headerlink" title="概要"></a>概要</h4></blockquote>
<pre><code>1.Activity是Android组件中最基本也是最为常见用的四大组件（Activity，Service,Content Provider，BroadcastReceiver）之一 

2.Activity是一个应用程序组件，提供一个屏幕，用户可以用来交互为了完成某项任务

3.Activity中所有操作都与用户密切相关，是一个负责与用户交互的组件，可以通过setContentView(View)来显示指定控件

4.在一个android应用中，一个Activity通常就是一个单独的屏幕，它上面可以显示一些控件也可以监听并处理用户的事件做出响应。Activity之间通过Intent进行通信
</code></pre>
<br/>

<blockquote>
<h4 id="状态"><a href="#状态" class="headerlink" title="状态"></a>状态</h4></blockquote>
<pre><code>在android 中，Activity 拥有四种基本状态：
</code></pre>
<blockquote>
<h5 id="1-Active-x2F-Running"><a href="#1-Active-x2F-Running" class="headerlink" title="1.Active&#x2F;Running"></a>1.Active&#x2F;Running</h5></blockquote>
<pre><code>一个新 Activity 启动入栈后，它显示在屏幕最前端，处理是处于栈的最顶端（Activity栈顶）
此时它处于可见并可和用户交互的激活状态,叫做活动状态或者运行状态（active or running）
</code></pre>
<blockquote>
<h5 id="2-Paused"><a href="#2-Paused" class="headerlink" title="2. Paused"></a>2. Paused</h5></blockquote>
<pre><code>当 Activity失去焦点， 被一个新的非全屏的Activity 或者一个透明的Activity 被放置在栈顶
此时的状态叫做暂停状态（Paused）。此时它依然与窗口管理器保持连接，
Activity依然保持活力（保持所有的状态，成员信息，和窗口管理器保持连接）
但是在系统内存极端低下的时候将被强行终止掉。所以它仍然可见，但已经失去了焦点故不可与用户进行交互
</code></pre>
<blockquote>
<h5 id="3-Stopped"><a href="#3-Stopped" class="headerlink" title="3. Stopped"></a>3. Stopped</h5></blockquote>
<pre><code>如果一个Activity被另外的Activity完全覆盖掉，叫做停止状态（Stopped）
它依然保持所有状态和成员信息，但是它不再可见，所以它的窗口被隐藏
当系统内存需要被用在其他地方的时候，Stopped的Activity将被强行终止掉
</code></pre>
<blockquote>
<h5 id="4-Killed"><a href="#4-Killed" class="headerlink" title="4. Killed"></a>4. Killed</h5></blockquote>
<pre><code>如果一个Activity是Paused或者Stopped状态，系统可以将该Activity从内存中删除
Android系统采用两种方式进行删除，要么要求该Activity结束，要么直接终止它的进程
当该Activity再次显示给用户时，它必须重新开始和重置前面的状态
</code></pre>
<br/>

<blockquote>
<h4 id="状态转换"><a href="#状态转换" class="headerlink" title="状态转换"></a>状态转换</h4></blockquote>
<pre><code>Activity在四种基本状态之间的转换如下图所示:
</code></pre>
<img src="/images/andoird_activity_status_switch.jpeg">

<pre><code>如上所示，Android 程序员可以决定一个 Activity 的“生”，但不能决定它的“死”，
也就是说程序员可以启动一个 Activity，但是却不能手动的“结束”一个 Activity。
当你调用 Activity.finish()方法时，结果和用户按下 BACK 键一样：
告诉 Activity Manager 该 Activity 实例完成了相应的工作，可以被“回收”。
随后 Activity Manager 激活处于栈第二层的 Activity 并重新入栈，
同时原 Activity 被压入到栈的第二层，从 Active 状态转到 Paused 状态。
例如：从 Activity1 中启动了 Activity2，则当前处于栈顶端的是 Activity2，
第二层是 Activity1，当我们调用 Activity2.finish()方法时，
Activity Manager 重新激活 Activity1 并入栈，
Activity2 从 Active 状态转换 Stoped 状态，
Activity1. onActivityResult(int requestCode, int resultCode, Intent data)方法被执行，
Activity2 返回的数据通过data参数返回给 Activity1
</code></pre>
<br/>

<blockquote>
<h4 id="Activity栈"><a href="#Activity栈" class="headerlink" title="Activity栈"></a>Activity栈</h4></blockquote>
<pre><code>Android 是通过一种 Activity 栈的方式来管理 Activity 的，一个 Activity 的实例的状态决定它在栈中的位置。
处于前台的 Activity 总是在栈的顶端，当前台的 Activity 因为异常或其它原因被销毁时，
处于栈第二层的 Activity 将被激活，上浮到栈顶。当新的 Activity 启动入栈时，
原 Activity 会被压入到栈的第二层。一个 Activity 在栈中的位置变化反映了它在不同状态间的转换。
Activity 的状态与它在栈中的位置关系如下图所示：
</code></pre>
<img src="/images/android_activity_stack.jpeg">

<pre><code>如上所示，除了最顶层即处在 Active 状态的 Activity 外，其它的 Activity 都有可能在系统内存不足时被回收，
一个 Activity 的实例越是处在栈的底层，它被系统回收的可能性越大。系统负责管理栈中 Activity 的实例，
它根据 Activity 所处的状态来改变其在栈中的位置
</code></pre>
<br/>

<blockquote>
<h4 id="Activity-生命周期"><a href="#Activity-生命周期" class="headerlink" title="Activity 生命周期"></a>Activity 生命周期</h4></blockquote>
<img src="/images/android_activity_lifecycle.gif">

<pre><code>下图示展示了从  Activity1创建 -&gt; 打开Activity2 -&gt; Activity2返回Activity1 过程
Activity1 和 Activity2 的生命周期
</code></pre>
<table style = "text-align:center;font-size:14px;table-layout:fixed;width:500px">
    <tr>
        <td></td><td bgcolor=#00dddd>Activity1</td><td bgcolor=#FF6100>Activity2</td>
    </tr>
    <tr>
        <td rowspan="3">创建打开Activity1</td><td>onCreate()</td><td></td>
    </tr>
    <tr>
        <td>onStart()</td><td></td>
    </tr>
    <tr>
        <td>onResume()</td><td></td>
    </tr>
    <tr>
        <td rowspan="5">Activity1打开Activity2</td><td>onPause()</td><td></td>
    </tr>
    <tr>
        <td></td><td>onCreate()</td>
    </tr>
    <tr>
        <td></td><td>onStart()</td>
    </tr>
    <tr>
        <td></td><td>onResume()</td>
    </tr>
    <tr>
        <td>onStop()</td><td></td>
    </tr>
    <tr>
        <td rowspan="5">Activity2返回Activity1</td><td></td><td>onPause()</td>
    </tr>
    <tr>
        <td>onStart()</td><td></td>
    </tr>
    <tr>
        <td>onResume()</td><td></td>
    </tr>
    <tr>
        <td></td><td>onStop()</td>
    </tr>
    <tr>
        <td></td><td>onDestroy()</td>
    </tr>
</table>

<br/>

<blockquote>
<h4 id="Activity-启动模式"><a href="#Activity-启动模式" class="headerlink" title="Activity 启动模式"></a>Activity 启动模式</h4></blockquote>
<pre><code>Activity总共有四大启动模式：
</code></pre>
<blockquote>
<h5 id="1-标准模式-standard"><a href="#1-标准模式-standard" class="headerlink" title="1.标准模式(standard)"></a>1.标准模式(standard)</h5></blockquote>
<pre><code>是Activity默认的启动模式，每当启动一个Activity时，就会在返回栈栈顶创建一个Activity的实例，
不论这个Activity在返回栈中是否有实例。我们在开发中大多都用这种模式
</code></pre>
<blockquote>
<h5 id="2-栈顶复用-singleTop"><a href="#2-栈顶复用-singleTop" class="headerlink" title="2.栈顶复用(singleTop)"></a>2.栈顶复用(singleTop)</h5></blockquote>
<pre><code>如果这个Activity已经存在于返回栈的栈顶，那么当重新打开这个Activity时，并不会重新创建它的实例，
而是去回调onNewIntent方法，接着执行Activity的onRestart-&gt;onStart-&gt;onResume

这两种启动模式都不涉及两个App之间调用对方Activity的情况。即使打开了另一个App的Activity，
也还是在当前App的Task里，返回栈还是当前Task的返回栈。如果多个App同时打开了一个App中的Activity，
他们是不会相互影响的
</code></pre>
<blockquote>
<h5 id="3-栈内复用-singleTask"><a href="#3-栈内复用-singleTask" class="headerlink" title="3.栈内复用(singleTask)"></a>3.栈内复用(singleTask)</h5></blockquote>
<pre><code>每次启动Activity时，都会在返回栈内检查是否有该Activity的实例，如果发现有则直接使用该实例，
并把在这个Activity之上的所有Activity统统出栈。如果没有，就会新创建一个Activity
</code></pre>
<blockquote>
<h5 id="4-全局唯一模式-singleInstance"><a href="#4-全局唯一模式-singleInstance" class="headerlink" title="4.全局唯一模式(singleInstance)"></a>4.全局唯一模式(singleInstance)</h5></blockquote>
<pre><code>这是我们最后的一种启动模式，也是我们最恶心的一种模式：在该模式下，我们会为目标Activity分配一个新的affinity，
并创建一个新的Task栈，将目标Activity放入新的Task，并让目标Activity获得焦点。新的Task有且只有这一个Activity实例。       
如果已经创建过目标Activity实例，则不会创建新的Task，而是将以前创建过的Activity唤醒（对应Task设为Foreground状态）
</code></pre>
<br/>

<blockquote>
<h4 id="Activity-状态保存"><a href="#Activity-状态保存" class="headerlink" title="Activity 状态保存"></a>Activity 状态保存</h4></blockquote>
<pre><code>Activity状态保存如下图所示：
</code></pre>
<img src="/images/android_activity_status.png">

<pre><code>这张图非常重要，可以帮我们解决异常情况下activity如何正常回复的问题，当系统停止activity时，
它会调用onSaveInstanceState()（过程1），如果activity被销毁了，但是需要创建同样的实例，
系统会把过程1中的状态数据传给onCreate()和onRestoreInstanceState()，
所以我们要在onSaveInstanceState()内做保存参数的动作，在onRestoreInstanceState()做获取参数的动作。
</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bob</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
